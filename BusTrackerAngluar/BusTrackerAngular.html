<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <title>Peter McNeely</title>
    <!-- Latest version of non-minified AngularJS. Note that there is a minified version available, but
    you should definitely not pull it in until your application is debugged. The error messages and
    stack traces from the minified version are almost impossible to decipher. -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular.js"></script>

    <!-- This is a special version of Bootstrap that works with AngularJS.
    Do not use the regular Bootstrap library in AngularJS applications! -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/2.5.0/ui-bootstrap-tpls.min.js"></script>

    <!-- Note you must continue to use the Latest compiled and minified CSS library for Bootstrap, even
    though the special version of the Bootstrap js file is being pulled in here. -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCNgngHZ6P_7NC7UJnSHyDwvl6mxd11Iag"></script>

    <script src="key.js" type="text/javascript"></script>
    <script src="BustrackerAngular.js" type="text/javascript"></script>
</head>
<body ng-app="myApp" class="container-fluid">
<div ng-controller="busController">
    <div style="padding: 3px">
        Route: <input ng-model="route" class="ng-pristine ng-untouched ng-valid ng-not-empty" type="text">
        <button class="btn btn-success" ng-click="doAjaxRequest()">Start</button>
        <button class="btn btn-danger" ng-click="stopBus()">Stop</button>
        <button class="btn btn-info" ng-click="panToCityHall()">Pan to City Hall</button>
        <label ng-show="success"> The number of times this route was updated was {{count}}</label>
    </div>
    <div><label ng-show="error">An ajax error occurred: {{reason}}</label></div>
    <div style="padding-bottom: 5px">
        <div id="map" style="width:100%;height:50vh"></div>
    </div>
    <div class="table-responsive">
    <table class="table table-striped table-bordered table-hover" summary="busList">
        <tr>
            <th>Bus</th>
            <th>Route</th>
            <th>latitude</th>
            <th>longitude</th>
            <th>speed(MPH)</th>
            <th>dist(mi)</th>
        </tr>
        <tr ng-repeat='vehicle in busList track by $index'>
            <td>{{vehicle.vid}}</td>
            <td>{{vehicle.rt}}</td>
            <td>{{vehicle.lat|number:4}}</td>
            <td>{{vehicle.lon|number:4}}</td>
            <td>{{vehicle.spd}}</td>
            <td>{{vehicle.pdist/5280|number:2}}</td>
        </tr>
    </table>
    </div>
</div>
</body>
</html>